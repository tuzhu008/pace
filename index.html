<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<title>PACE</title>
<script src="/pace/pace.js"></script>
<link rel="stylesheet" href="/pace/docs/resources/barber-pole-orange.css">
</link>
<link rel="icon" href="http://static.hubspot.com/favicon.ico">
<link rel="stylesheet" href="https://static2cdn.hubspot.com/hubspot_public_assets/static-1.112/shared/sass/hubspot_public_assets.css">
<link rel="stylesheet" href="http://static.hubspot.com/bundles/navigation.css">
<link rel="stylesheet" href="/pace/github_hubspot_com/static-resources/css/print.css">
<link rel="stylesheet" href="/pace/github_hubspot_com/static-resources/css/highlight-theme-github.css">
<link rel="stylesheet" href="/pace/github_hubspot_com/static-resources/css/navigation-tweaks.css">
<link rel="stylesheet" href="/pace/github_hubspot_com/static-resources/css/documentation.css">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<link rel="stylesheet" href="//github.hubspot.com/PACE//resources/executr/lib/CodeMirror/codemirror.css">
<link rel="stylesheet" href="//github.hubspot.com/PACE//resources/executr/build/css/executr.css">
<script src="//github.hubspot.com/PACE//resources/executr/lib/CodeMirror/codemirror.js"></script>
<script src="//github.hubspot.com/PACE//resources/executr/lib/CodeMirror/mode/coffeescript/coffeescript.js"></script>
<script src="//github.hubspot.com/PACE//resources/executr/lib/CodeMirror/mode/javascript/javascript.js"></script>
<script src="//github.hubspot.com/PACE//resources/executr/lib/coffee-script.js"></script>
<script src="//github.hubspot.com/PACE//resources/executr/lib/underscore.min.js"></script>
<script src="//github.hubspot.com/PACE//resources/executr/lib/js2coffee.min.js"></script>
<script src="//github.hubspot.com/PACE//resources/executr/build/js/executr.js"></script>
<script src="//github.hubspot.com/PACE//resources/executr/build/js/executr-run.js"></script>
<script src="//use.typekit.net/ghy0wve.js"></script>
<script>try{Typekit.load();}catch(e){}
</script>
</head>
<body>
<div id="hs-nav-v3" class="nav-width-flex signed-out-nav">
  <div class="hs-nav-section main-nav">
    <div class="nav-section-inner">
      <ul class="nav-links-left">
        <li class="first"><a class="nav-logo" href="http://www.hubspot.com/"><img height="34" src="https://static.hubspot.com/style-guide/img/nav-sprocket.png" width="29"></a></li>
        <li>
        <a href="http://dev.hubspot.com">
                        HubSpot Dev &amp; Design
        </a>
        </li>
        <li>
        <a class="current-nav-item" href="http://hubspot.github.com">
                        Open Source
        </a>
        </li>
        <li>
        <a href="http://dev.hubspot.com/blog">
                        Blog
        </a>
        </li>
      </ul>
      <ul class="nav-links-right">
        <li class="first">
        <a href="http://dev.hubspot.com/jobs/" class="sign-in">We're Hiring Engineers</a>
        </li>
      </ul>
    </div>
  </div>
</div>
<div class="hs-doc-marquee">
  <div class="hs-page-width-normal">
    <div class="row-fluid">
      <div class="span6">
        <h1>PACE</h1>
        <h3 class="hs-doc-marquee-description">自动的页面加载进度条</h3>
        <p class="hs-doc-marquee-release">
          1.0.2
        </p>
        <p class="hs-doc-marquee-stars">
          <iframe src="http://ghbtns.com/github-btn.html?user=HubSpot&repo=PACE&type=watch&count=true&size=large" allowtransparency="true" frameborder="0" scrolling="0" width="240" height="30">
          </iframe>
        </p>
      </div>
      <div class="span6">
        <div class="hs-doc-marquee-buttons">
          <a class="hs-doc-marquee-button" href="http://github.com/HubSpot/PACE">Star on GitHub</a><a class="hs-doc-marquee-button" href="http://github.com/HubSpot/PACE/archive/v1.0.2.zip">下载 ZIP (v1.0.2)</a>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="hs-page-width-normal">
  <div class="row-fluid">
    <div class="span3">
      <div class="hs-doc-sidenav">
        <nav>
        <ul class="hs-public-sidenav">
          <li class="current-nav-item"><a href="">首页</a></li>
        </ul>
        </nav>
      </div>
    </div>
    <div class="span9">
      <div class="hs-doc-content">
        <h1 id="pace">pace</h1>
        <p>
          在页面包含<a href="https://raw.github.com/HubSpot/pace/v0.5.3/pace.min.js">pace.js</a> 和
          <a href="http://github.hubspot.com/pace/docs/welcome/">主题</a> css 文件(越早越好), 就这么简单！
        </p>
        <p>
          Pace将自动监控 ajax 请求、事件循环延迟、文档就绪状态和页面上的元素，以确定进度。在 ajax 导航中，它将再次开始!
        </p>
        <p>
          如果您使用 AMD 或 Browserify，请require pace.js，并尽可能早地在加载过程中调用 <code>pace.start()</code> 
        </p>
        <h2 id="wordpress">在 Wordpress 上安装</h2>
        <p>
          可以通过安装这个<a href="https://wordpress.org/plugins/pace" target="_blank">Wordpress 插件</a>来添加 PACE 到你的 Wordpress 站点。
        </p>
        <h2 id="example">示例</h2>
        <pre>
          <code class="lang-html"><span class="tag">&lt;<span class="title">head</span>&gt;</span>
          <span class="tag">&lt;<span class="title">script</span><span class="attribute">src</span>=<span class="value">"/pace/pace.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
          <span class="tag">&lt;<span class="title">link</span><span class="attribute">href</span>=<span class="value">"/pace/themes/pace-theme-barber-shop.css"</span><span class="attribute">rel</span>=<span class="value">"stylesheet"</span> /&gt;</span>
          <span class="tag">&lt;/<span class="title">head</span>&gt;</span></code>
        </pre>
        <h2 id="configuration">配置</h2>
        <p>
          Pace 是全自动的，无需配置就可以开始。
        </p>
        <p>
          如果你想做一些调整，以下是如何:
        </p>
        <p>
          可以在将文件引入前设置 <code>window.paceOptions</code>：
        </p>
        <pre>
          <code class="lang-javascript">paceOptions = {
          <span class="comment">// 禁用 '元素' 的来源</span>
  elements: 
          <span class="literal">false</span>,
          <span class="comment">// 只显示常规和 ajax-y 页面导航的进度条，</span>
          <span class="comment">// 而不是每个请求</span>
  restartOnRequestAfter: 
          <span class="literal">false</span>
}
          </code>
        </pre>
        <p>
          你也可以在 script 标签上加上选项:
        </p>
        <pre>
          <code class="lang-html"><span class="tag">&lt;<span class="title">script</span><span class="attribute">data-pace-options</span>=<span class="value">'{ "ajax": false }'</span><span class="attribute">src</span>=<span class="value">'pace.js'</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></code>
        </pre>
        <p>
          如果你使用 AMD 或 Browserify, 可以将选项传入 <code>start</code>:
        </p>
        <pre>
          <code class="lang-javascript">define([<span class="string">'pace'</span>], <span class="keyword">function</span>(pace){
  pace.start({
    document: 
          <span class="literal">false</span>
  });
});
          </code>
        </pre>
        <h2 id="themes">主题</h2>
        <p>
          Pace 包含了一系列的<a href="/pace/docs/welcome/">主题</a>来让你快速开始。只要包含适当的 css 文件。
        </p>
        <h2 id="collectors">收集器</h2>
        <p>
          收集器用来收集进度信息的代码字节数。Pace 包括四个默认收集器:
        </p>
        <ul>
          <li>
          <p>
            Ajax
          </p>
          <p>
            监视页面上的所有 ajax 请求。
          </p>
          </li>
          <li>
          <p>
            Elements
          </p>
          <p>
            检查页面上特定元素的存在性
          </p>
          </li>
          <li>
          <p>
            Document
          </p>
          <p>
            检查文档的 readyState
          </p>
          </li>
          <li>
          <p>
            Event Lag
          </p>
          <p>
            检查正在执行的事件循环滞后信号
          </p>
          </li>
        </ul>
        <p>
          可以通过相同名称的配置选项进行配置或禁用。
        </p>
        <pre>
          <code class="lang-javascript">paceOptions = {
  ajax: 
          <span class="literal">false</span>, <span class="comment">// disabled</span>
  document: 
          <span class="literal">false</span>, <span class="comment">// disabled</span>
  eventLag: 
          <span class="literal">false</span>, <span class="comment">// disabled</span>
  elements: {
    selectors: [
          <span class="string">'.my-page'</span>]
  }
};
          </code>
        </pre>
        <p>
          向 <code>paceOptions.extraSources</code> 添加自己的类以增加更多的资源。
          每个源要么有 <code>.progress</code> 属性，要么有 <code>.elements</code> 属性，这个属性是一个带有 <code>.progress</code> 属性的对象列表，Pace 将自动处理所有缩放操作，以使进度更改对用户来说看起来更平滑。
        </p>
        <h2 id="elements">Elements</h2>
        <p>
          元素被渲染到屏幕是我们确定页面已被渲染的一种方式。如果您想使用该信息源(根本不需要)，请指定一个或多个选择器。您可以用逗号分隔选择符，以适当地处理错误状态，在哪里进度条应该消失，但是我们寻找的元素可能永远不会出现:
        </p>
        <pre>
          <code class="lang-javascript">paceOptions = {
  elements: {
    selectors: [
          <span class="string">'.timeline,.timeline-error'</span>, <span class="string">'.user-profile,.profile-error'</span>]
  }
}
          </code>
        </pre>
        <p>
          Pace 将考虑在每个选择器匹配某些内容时，元素测试是否成功。对于本例，当存在 <code>.timeline</code> 或 <code>.timeline-error</code>，以及 <code>.user-profile</code> 或 <code>.profile-error</code> 存在时。
        </p>
        <h2 id="restart-rules">Restart Rules</h2>
        <p>
          大多数用户希望进度条在发生 pushState 事件时自动重新启动(通常意味着出现 ajax 导航)。你可以禁用这个:
        </p>
        <pre>
          <code class="lang-javascript">paceOptions = {
  restartOnPushState: 
          <span class="literal">false</span>
}
          </code>
        </pre>
        <p>
          您还可以对每一个持续时间超过 x ms的 ajax 请求重新启动 pace。
          如果您发出用户不需要知道的 ajax 请求，比如预缓存，您将希望禁用该请求:
        </p>
        <pre>
          <code class="lang-javascript">paceOptions = {
  restartOnRequestAfter: 
          <span class="literal">false</span>
}
          </code>
        </pre>
        <p>
          可以通过调用 <code>Pace.restart()</code> 手动触发重启。
        </p>
        <p>
          参见 <a href="https://github.com/HubSpot/pace/blob/master/pace.coffee">该源文件</a> 获取完整的选项列表。
        </p>
        <h2 id="api">API</h2>
        <p>
          Pace 暴露了以下方法：
        </p>
        <ul>
          <li>
          <p>
            <code>Pace.start</code>: 显示进度条并开始更新。如果不使用 AMD 或 CommonJS，则自动调用。
          </p>
          </li>
          <li>
          <p>
            <code>Pace.restart</code>：如果隐藏了进度条，则显示它，并开始从头报告进度。当默认情况下调用 <code>pushState</code> 或 <code>replaceState</code> 时会自动调用。
          </p>
          </li>
          <li>
          <p>
            <code>Pace.stop</code>: 隐藏进度条并停止更新。
          </p>
          </li>
          <li>
          <p>
            <code>Pace.track</code>: 显式地跟踪一个或多个请求，请参见下面的跟踪
          </p>
          </li>
          <li>
          <p>
            <code>Pace.ignore</code>: 忽略一个或多个请求，请参阅下面的跟踪
          </p>
          </li>
        </ul>
        <h2 id="events">事件</h2>
        <p>
          Pace 会触发以下事件:
        </p>
        <ul>
          <li><code>start</code>: 当 pace 初始启动时，或者作为重新启动的一部分</li>
          <li><code>stop</code>: 当 pace 被手动停止时，或者作为重新启动的一部分</li>
          <li><code>restart</code>: 当 pace 重新启动时(手动地, 或者通过新的 AJAX 请求)</li>
          <li><code>done</code>: 当 pace 完成时</li>
          <li><code>hide</code>: 当 pace 隐藏时(可以晚于 <code>done</code>, 基于 <code>ghostTime</code> 和 <code>minTime</code>)</li>
        </ul>
        <p>
          你也可以使用  <code>on</code>，<code>off</code> 和 <code>once</code> 方法绑定到事件：
        </p>
        <ul>
          <li><code>Pace.on(event, handler, [context])</code>: 当 <code>event</code> 被触发时调用 <code>handler</code>（context 是可选的）</li>
          <li><code>Pace.off(event, [handler])</code>: 解绑所提供的 <code>event</code> 和 <code>handler</code> 结合。</li>
          <li><code>Pace.once(event, handler, [context])</code>: 绑定 <code>handler</code> 到下一个事件的发生。处理程序仅被触发一次。</li>
        </ul>
        <h2 id="tracking">跟踪</h2>
        <p>
          默认情况下，Pace 将显示任何 ajax 请求，这些请求以正常或 ajax-y 页面加载的一部分开始，或者持续时间超过 500ms。
        </p>
        <p>
          你可以通过设置 <code>ajax</code> 为 false 来禁用所有的 ajax 跟踪：
        </p>
        <pre>
          <code class="lang-javascript">Pace.options = {
  ajax: 
          <span class="literal">false</span>
}
          </code>
        </pre>
        <p>
          可以将 <code>restartOnRequestAfter</code> 设置为 false 来禁用除页面导航之外的 ajax 跟踪:
        </p>
        <pre>
          <code class="lang-javascript">Pace.options = {
  restartOnRequestAfter: 
          <span class="literal">false</span>
}
          </code>
        </pre>
        <p>
          您可以通过在 <code>Pace.ignore</code> 回调中触发特定请求来手动禁用对这些请求的跟踪:
        </p>
        <pre>
          <code class="lang-javascript">Pace.ignore(<span class="keyword">function</span>(){
  $.ajax(...)
});
          </code>
        </pre>
        <p>
          您可以通过在 <code>Pace.track</code> 回调中触发某个特定请求来强制为这些请求显示进度条:
        </p>
        <pre>
          <code class="lang-javascript">Pace.track(<span class="keyword">function</span>(){
  $.ajax(...)
});
          </code>
        </pre>
        <p>
          您也可以忽略基于模式的 URL:
        </p>
        <pre>
          <code class="lang-javascript">Pace.options = {
  ajax: {
    ignoreURLs: [
          <span class="string">'some-substring'</span>, <span class="regexp">/some-regexp/</span>]
  }
}
          </code>
        </pre>
        <h2 id="dependencies">依赖</h2>
        <p>
          无!
        </p>
        <h2 id="support">支持</h2>
        <p>
          Pace支持 IE8+(标准模式)、FF 3.5+、Chrome、Safari 4+、Opera 10.5+ 以及所有现代移动浏览器。如果您遇到兼容性问题，或者可能支持其他东西，请创建一个 issue。
        </p>
        <h2 id="size">大小</h2>
        <p>
          pace.js 压缩后只有 4kb。主题间于 0.5 和 4kb 之间。
        </p>
        <h2 id="issues">Issues</h2>
        <p>
          We have obviously not tested this on every website.  If you run into an issue, or find a way the automatic
detection could be better, please 
          <a href="https://github.com/HubSpot/pace/issues/new">create an Issue</a>.  If you can include a test case, that&#39;s even better.
        </p>
        <h2 id="contributing">贡献</h2>
        <p>
          PRs Welcome!
        </p>
        <p>
          Building requires node.js.
        </p>
        <pre>
          <code class="lang-bash">npm install
grunt
          </code>
        </pre>
        <p>
          You can also run <code>grunt watch</code> to have it automatically build as you make changes.
        </p>
        <p>
          There is no need to include compiled files in PRs.
        </p>
        <h2 id="credits">关于作者</h2>
        <p>
          <a href="http://dev.hubspot.com">HubSpot</a>
        </p>
        <p>
          Javascript by <a href="http://twitter.com/zackbloom">Zack Bloom</a>
CSS by 
          <a href="http://twitter.com/adamfschwartz">Adam Schwartz</a>
        </p>
        <p>
          Themes inspired by <a href="http://tympanus.net/codrops/2013/09/18/creative-loading-effects/">Mary Lou</a>
        </p>
        <p>
          Project inspired by <a href="http://ricostacruz.com/nprogress/">nprogress</a>
        </p>
      </div>
    </div>
  </div>
</div>
<div class="hs3-public-footer">
  <div class="row-fluid hs-page-width-normal">
    <div class="span3 hidden-phone">
      <h3>HubSpot</h3>
      <ul>
        <li><a href="http://www.hubspot.com">Home</a></li>
        <li><a href="http://www.hubspot.com/software">Products</a></li>
        <li><a href="http://www.hubspot.com/internet-marketing-company/">About</a></li>
      </ul>
    </div>
    <div class="span3">
      <h3>Projects</h3>
      <ul>
        <li><a href="http://github.hubspot.com/messenger">Messenger</a></li>
        <li><a href="http://github.hubspot.com/facewall">Facewall</a></li>
        <li><a href="http://github.hubspot.com/jquery-zoomer">jQuery Zoomer</a></li>
        <li><a href="http://github.hubspot.com/humanize">Humanize</a></li>
        <li><a href="http://github.hubspot.com/teeble">Teeble</a></li>
      </ul>
    </div>
    <div class="span3">
      <h3>Development Team</h3>
      <ul>
        <li><a href="http://dev.hubspot.com">Home</a></li>
        <li><a href="http://dev.hubspot.com/teams">Teams</a></li>
        <li><a href="http://dev.hubspot.com/people">People</a></li>
        <li><a href="http://dev.hubspot.com/jobs">Jobs</a></li>
      </ul>
    </div>
    <div class="span3 hidden-phone">
      <h3>Developer API</h3>
      <ul>
        <li><a href="http://developers.hubspot.com/">Developer Documentation</a></li>
      </ul>
    </div>
  </div>
</div>
<!-- Start of Async HubSpot Analytics Code -->
<script type="text/javascript">
    (function(d,s,i,r) {
        if (d.getElementById(i)){return;}
        var n=d.createElement(s),e=d.getElementsByTagName(s)[0];
        n.id=i;n.src='//js.hubspot.com/analytics/'+(Math.ceil(new Date()/r)*r)+'/51294.js';
        e.parentNode.insertBefore(n, e);
    })(document,"script","hs-analytics",300000);
</script>
<!-- End of Async HubSpot Analytics Code -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-45159009-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>